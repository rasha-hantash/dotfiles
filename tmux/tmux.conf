# --- Prefix ---
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# --- General ---
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# --- Status bar (top, minimal — backup indicator) ---
set -g status-position top
set -g status-style 'bg=#1e1e2e fg=#cdd6f4'
set -g status-left ' #[bold]#S#[nobold] │ '
set -g status-left-length 20
set -g status-right ''
set -g status-justify left

# Window tabs in status bar
setw -g window-status-format ' #I:#W '
setw -g window-status-current-format ' #I:#W '
setw -g window-status-current-style 'bg=#f38ba8 fg=#1e1e2e bold'
setw -g window-status-style 'fg=#6c7086'
setw -g window-status-separator ''

# --- Session switching (Ctrl+a then Up/Down) ---
bind Up previous-window
bind Down next-window

# --- Sidebar + mini-terminal auto-creation ---
# When a new window is created, split the right column into sidebar + mini-terminal
set-hook -g after-new-window '\
    split-window -h -p 25 "~/.local/bin/tmux-sidebar" ; \
    split-window -v -l 5 ; \
    select-pane -t :.1 \
'
